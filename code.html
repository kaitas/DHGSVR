<!doctype html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PORTAL_INDEX | Creative Links</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Zen+Kaku+Gothic+New:wght@400;700&display=swap');

    body {
      font-family: 'Zen Kaku Gothic New', sans-serif;
      background-color: #0f172a;
      color: #e2e8f0;
      overflow-x: hidden;
    }
    .font-mono {
      font-family: 'JetBrains Mono', monospace;
    }
    ::-webkit-scrollbar {
      width: 8px;
    }
    ::-webkit-scrollbar-track {
      background: #0f172a;
    }
    ::-webkit-scrollbar-thumb {
      background: #334155;
      border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #475569;
    }
    .bg-grid {
      background-size: 50px 50px;
      background-image:
        linear-gradient(to right, rgba(255, 255, 255, 0.05) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(255, 255, 255, 0.05) 1px, transparent 1px);
      mask-image: radial-gradient(circle at center, black 40%, transparent 100%);
      -webkit-mask-image: radial-gradient(circle at center, black 40%, transparent 100%);
      pointer-events: none;
    }
    .link-card {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .link-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 0 20px rgba(56, 189, 248, 0.3);
      border-color: rgba(56, 189, 248, 0.5);
    }
    .glitch-text {
      position: relative;
    }
    .glitch-text::before,
    .glitch-text::after {
      content: attr(data-text);
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #0f172a;
    }
    .glitch-text::before {
      left: 2px;
      text-shadow: -1px 0 #00ffea;
      clip: rect(24px, 550px, 90px, 0);
      animation: glitch-anim-2 3s infinite linear alternate-reverse;
    }
    .glitch-text::after {
      left: -2px;
      text-shadow: -1px 0 #ff005d;
      clip: rect(85px, 550px, 140px, 0);
      animation: glitch-anim 2.5s infinite linear alternate-reverse;
    }
    @keyframes glitch-anim {
      0% { clip: rect(11px, 9999px, 89px, 0); }
      20% { clip: rect(68px, 9999px, 14px, 0); }
      40% { clip: rect(23px, 9999px, 57px, 0); }
      60% { clip: rect(93px, 9999px, 92px, 0); }
      80% { clip: rect(4px, 9999px, 28px, 0); }
      100% { clip: rect(51px, 9999px, 7px, 0); }
    }
    @keyframes glitch-anim-2 {
      0% { clip: rect(65px, 9999px, 100px, 0); }
      20% { clip: rect(9px, 9999px, 22px, 0); }
      40% { clip: rect(60px, 9999px, 7px, 0); }
      60% { clip: rect(32px, 9999px, 55px, 0); }
      80% { clip: rect(4px, 9999px, 36px, 0); }
      100% { clip: rect(79px, 9999px, 4px, 0); }
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script>
    const rawLinks = [
      'https://akihiko.shirai.as/DHGSVR/',
      'https://c426.github.io/',
      'https://sonobemasashi-web.github.io/github.io/',
      'https://final-ke.github.io/',
      'https://isa251.github.io',
      'https://github.com/g241tg2054-png/g241tg2054.github.io',
      'https://marinakawaguchi.com/',
      'https://tofumisoshiru.github.io/DHGSVR/',
      'https://lovpipit.github.io/',
      'https://floriahimmel.github.io/4Q_Floria/',
      'https://anine998.github.io',
      'https://saia-ui.github.io/',
      'https://siraha0611.github.io/kaso-katsumata.github.io/'
    ];

    const externalLinkIcon = '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>';
    const copyIcon = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>';
    const checkIcon = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#4ade80" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>';
    const searchIcon = '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>';

    const processLinks = (urls) => urls.map((url, index) => {
      let name = 'Portfolio';
      let tag = 'Web';
      try {
        const urlObj = new URL(url);
        const path = urlObj.pathname.replace(/\/$/, '');
        if (url.includes('akihiko.shirai')) name = 'Akihiko Shirai';
        else if (url.includes('marinakawaguchi')) name = 'Marina Kawaguchi';
        else if (url.includes('github.com')) {
          name = 'Repository / Project';
          tag = 'Source';
        } else if (url.includes('github.io')) {
          const subdomain = urlObj.hostname.split('.')[0];
          name = subdomain;
          if (name === 'sonobemasashi-web') name = 'Sonobe Masashi';
          if (name === 'tofumisoshiru') name = 'Tofu Misoshiru';
          if (name === 'final-ke') name = 'Final-ke';
          if (name === 'siraha0611') name = 'Siraha / Kaso';
          if (path.length > 1 && !path.includes('github.io')) {
            const subProject = path.split('/').pop();
            if (subProject) name += ` / ${subProject}`;
          }
        }
      } catch (e) {
        name = 'Unknown Link';
      }
      return {
        id: index,
        url,
        name: name.charAt(0).toUpperCase() + name.slice(1),
        tag
      };
    });

    const links = processLinks(rawLinks);

    const renderBase = () => {
      document.getElementById('root').innerHTML = `
        <div class="min-h-screen relative w-full pb-20 text-slate-200">
          <div class="fixed inset-0 bg-grid z-[-1]"></div>
          <div class="fixed top-0 left-0 w-full h-full bg-gradient-to-b from-slate-900/0 to-slate-900/90 pointer-events-none z-[-1]"></div>
          <header class="pt-20 pb-12 px-6 flex flex-col items-center justify-center text-center relative z-10">
            <h1 class="text-5xl md:text-7xl font-bold mb-4 tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-600 glitch-text" data-text="PORTAL_INDEX">
              PORTAL_INDEX
            </h1>
            <p class="text-slate-400 max-w-lg mx-auto font-mono text-sm md:text-base">
              Access Points for Creative Portfolios & VR Projects.<br>
              <span class="opacity-50" data-total></span>
            </p>
          </header>
          <div class="max-w-xl mx-auto px-6 mb-16 relative z-10">
            <div class="relative group">
              <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-slate-500 group-focus-within:text-sky-400 transition-colors">
                ${searchIcon}
              </div>
              <input
                id="search"
                type="text"
                placeholder="Search by name or URL..."
                class="w-full bg-slate-800/80 backdrop-blur border border-slate-700 text-white rounded-full py-4 pl-12 pr-6 focus:outline-none focus:ring-2 focus:ring-sky-500/50 focus:border-sky-500 transition-all shadow-lg placeholder:text-slate-500"
              />
              <div class="absolute inset-0 -z-10 bg-sky-500/5 rounded-full blur-xl group-focus-within:bg-sky-500/10 transition-all"></div>
            </div>
          </div>
          <main class="max-w-7xl mx-auto px-6 relative z-10">
            <div id="grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
          </main>
          <footer class="text-center mt-20 text-slate-600 text-sm font-mono relative z-10">
            <p>GENERATED_BY_SYSTEM // ${new Date().getFullYear()}</p>
          </footer>
        </div>
      `;
    };

    const cardTemplate = (item) => `
      <a
        href="${item.url}"
        target="_blank"
        rel="noopener noreferrer"
        class="link-card group relative flex flex-col justify-between p-6 bg-slate-800/40 backdrop-blur-md border border-slate-700 rounded-xl hover:bg-slate-800/60 cursor-pointer overflow-hidden z-10"
      >
        <div class="absolute -top-10 -right-10 w-32 h-32 bg-sky-500/20 rounded-full blur-3xl group-hover:bg-sky-400/30 transition-all duration-500"></div>
        <div>
          <div class="flex justify-between items-start mb-4">
            <span class="text-xs font-mono px-2 py-1 rounded border ${item.tag === 'Source' ? 'bg-purple-500/10 border-purple-500/30 text-purple-300' : 'bg-sky-500/10 border-sky-500/30 text-sky-300'}">
              ${item.tag}
            </span>
            ${externalLinkIcon}
          </div>
          <h3 class="text-xl font-bold text-white mb-1 tracking-tight group-hover:text-sky-300 transition-colors">
            ${item.name}
          </h3>
          <p class="text-slate-400 text-xs font-mono truncate opacity-70 group-hover:opacity-100 transition-opacity">
            ${item.url}
          </p>
        </div>
        <div class="mt-6 flex justify-end">
          <button
            data-url="${item.url}"
            class="copy-btn p-2 rounded-lg bg-slate-700/50 hover:bg-slate-600 text-slate-300 hover:text-white transition-colors border border-transparent hover:border-slate-500 z-10"
            title="Copy URL"
            aria-label="Copy URL"
            type="button"
          >
            ${copyIcon}
          </button>
        </div>
      </a>
    `;

    const renderCards = (filtered) => {
      const grid = document.getElementById('grid');
      if (filtered.length === 0) {
        grid.innerHTML = '<div class="col-span-full text-center py-20"><p class="text-slate-500 font-mono text-lg">No signals found.</p></div>';
        return;
      }
      grid.innerHTML = filtered.map(cardTemplate).join('');
    };

    const copyToClipboard = async (text) => {
      try {
        if (navigator.clipboard) {
          await navigator.clipboard.writeText(text);
        } else {
          const textArea = document.createElement('textarea');
          textArea.value = text;
          document.body.appendChild(textArea);
          textArea.select();
          document.execCommand('copy');
          document.body.removeChild(textArea);
        }
        return true;
      } catch (e) {
        return false;
      }
    };

    const attachEvents = () => {
      const totalEl = document.querySelector('[data-total]');
      totalEl.textContent = `Total Links: ${links.length}`;

      const searchInput = document.getElementById('search');
      const filterAndRender = () => {
        const q = searchInput.value.trim().toLowerCase();
        const filtered = links.filter((link) =>
          link.name.toLowerCase().includes(q) || link.url.toLowerCase().includes(q)
        );
        renderCards(filtered);
      };
      searchInput.addEventListener('input', filterAndRender);
      filterAndRender();

      document.getElementById('grid').addEventListener('click', async (e) => {
        const btn = e.target.closest('.copy-btn');
        if (!btn) return;
        e.preventDefault();
        const url = btn.dataset.url;
        const ok = await copyToClipboard(url);
        if (ok) {
          btn.innerHTML = checkIcon;
          setTimeout(() => {
            btn.innerHTML = copyIcon;
          }, 2000);
        }
      });
    };

    const initParticles = () => {
      const canvas = document.createElement('canvas');
      canvas.className = 'fixed inset-0 pointer-events-none z-[-2]';
      document.body.appendChild(canvas);
      const ctx = canvas.getContext('2d');
      const particles = [];
      const mouse = { x: -1000, y: -1000 };
      let animationId;

      const resizeCanvas = () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        particles.length = 0;
        const count = 800;
        for (let i = 0; i < count; i++) {
          particles.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            vx: (Math.random() - 0.5) * 0.5,
            vy: (Math.random() - 0.5) * 0.5,
            ovx: (Math.random() - 0.5) * 0.5,
            ovy: (Math.random() - 0.5) * 0.5,
            size: Math.random() * 1.5 + 0.5,
            color: `rgba(${Math.floor(Math.random() * 100)}, ${Math.floor(Math.random() * 200 + 55)}, ${Math.floor(Math.random() * 255)}, ${Math.random() * 0.3 + 0.1})`
          });
        }
      };

      const animate = () => {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles.forEach((p) => {
          p.x += p.vx;
          p.y += p.vy;
          const dx = mouse.x - p.x;
          const dy = mouse.y - p.y;
          const dist = Math.sqrt(dx * dx + dy * dy);
          const repel = 150;
          if (dist < repel) {
            const angle = Math.atan2(dy, dx);
            const force = (repel - dist) / repel;
            const strength = 2;
            p.vx -= Math.cos(angle) * force * strength;
            p.vy -= Math.sin(angle) * force * strength;
          } else {
            p.vx += (p.ovx - p.vx) * 0.05;
            p.vy += (p.ovy - p.vy) * 0.05;
          }
          if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
          if (p.y < 0 || p.y > canvas.height) p.vy *= -1;
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
          ctx.fillStyle = p.color;
          ctx.fill();
        });

        const connectCount = Math.min(particles.length, 150);
        for (let i = 0; i < connectCount; i++) {
          const p1 = particles[i];
          for (let j = i + 1; j < connectCount; j++) {
            const p2 = particles[j];
            const dx = p1.x - p2.x;
            const dy = p1.y - p2.y;
            const dist = Math.sqrt(dx * dx + dy * dy);
            if (dist < 100) {
              ctx.beginPath();
              ctx.strokeStyle = `rgba(56, 189, 248, ${0.1 * (1 - dist / 100)})`;
              ctx.lineWidth = 1;
              ctx.moveTo(p1.x, p1.y);
              ctx.lineTo(p2.x, p2.y);
              ctx.stroke();
            }
          }
        }
        animationId = requestAnimationFrame(animate);
      };

      const handleMouseMove = (e) => {
        mouse.x = e.clientX;
        mouse.y = e.clientY;
      };
      const handleMouseLeave = () => {
        mouse.x = -1000;
        mouse.y = -1000;
      };

      window.addEventListener('resize', resizeCanvas);
      window.addEventListener('mousemove', handleMouseMove);
      window.addEventListener('mouseout', handleMouseLeave);

      resizeCanvas();
      animate();

      window.addEventListener('beforeunload', () => {
        cancelAnimationFrame(animationId);
        window.removeEventListener('resize', resizeCanvas);
        window.removeEventListener('mousemove', handleMouseMove);
        window.removeEventListener('mouseout', handleMouseLeave);
      });
    };

    renderBase();
    attachEvents();
    initParticles();
  </script>
</body>
</html>
